<!DOCTYPE html>
<html>
<head>
    <title>Configuração do ModSecurity com Nginx</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            max-width: 800px;
        }
        h1, h2 {
            color: #333;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border: 1px solid #ccc;
            font-size: 16px;
            line-height: 1.4;
            overflow: auto;
            position: relative;
        }
        code {
            display: block;
        }
       .copy-button {
        position: absolute;
        top: 5px;
        right: 5px;
        padding: 5px 10px;
        background-color: #FFFFCC; /* Amarelo claro */
        color: #333;
        border: none;
        cursor: pointer;
        border-radius: 5px; /* Borda arredondada */
    }
    </style>
</head>
<body>
    <h1>Configuração do ModSecurity com Nginx</h1>
    <p>Este tutorial descreve os passos detalhados para configurar o ModSecurity com o Nginx em um sistema Linux. Siga as instruções cuidadosamente.</p>

    <h2>Passo 1: Atualizar o Sistema e Instalar Dependências</h2>
    <p>Atualize a lista de pacotes do sistema e instale as dependências necessárias:</p>
    <pre><code id="comando1">apt update</code>
    <button class="copy-button" onclick="copiarComando('comando1')">Copiar Comando</button>
    </pre>
    <pre><code id="comando2">apt install make gcc build-essential autoconf automake libtool libfuzzy-dev ssdeep gettext pkg-config libcurl4-openssl-dev liblua5.3-dev libpcre3 libpcre3-dev libxml2 libxml2-dev libyajl-dev doxygen libcurl4 libgeoip-dev libssl-dev zlib1g-dev libxslt-dev liblmdb-dev libpcre++-dev libgd-dev</code>
    <button class="copy-button" onclick="copiarComando('comando2')">Copiar Comando</button>
    </pre>

    <h2>Passo 2: Instalar e Configurar o Nginx</h2>
    <p>Instale o Nginx e prepare a estrutura de diretórios:</p>
    <pre><code id="comando3">apt install nginx-core nginx-common nginx nginx-full</code>
    <button class="copy-button" onclick="copiarComando('comando3')">Copiar Comando</button>
    </pre>
    <pre><code id="comando4">mkdir -p /usr/local/src/nginx</code>
    <button class="copy-button" onclick="copiarComando('comando4')">Copiar Comando</button>
    </pre>
    <pre><code id="comando5">chown $USER:$USER -R /usr/local/src/</code>
    <button class="copy-button" onclick="copiarComando('comando5')">Copiar Comando</button>
    </pre>

    <!-- Adicione mais passos e explicações aqui -->

    <h2>Passo 4: Configurar o Core Rule Set e Reiniciar o Nginx</h2>
    <p>Configure o Core Rule Set do ModSecurity e reinicie o Nginx:</p>
    <pre><code id="comando6">cp /usr/local/src/ModSecurity/unicode.mapping /etc/nginx/modsec/</code>
    <button class="copy-button" onclick="copiarComando('comando6')">Copiar Comando</button>
    </pre>
    <pre><code id="comando7">nginx -t</code>
    <button class="copy-button" onclick="copiarComando('comando7')">Copiar Comando</button>
    </pre>
    <pre><code id="comando8">systemctl restart nginx</code>
    <button class="copy-button" onclick="copiarComando('comando8')">Copiar Comando</button>
    </pre>
    <pre><code id="comando9">systemctl status nginx</code>
    <button class="copy-button" onclick="copiarComando('comando9')">Copiar Comando</button>
    </pre>
    <pre><code id="comando10">wget https://github.com/coreruleset/coreruleset/archive/v3.3.0.tar.gz</code>
    <button class="copy-button" onclick="copiarComando('comando10')">Copiar Comando</button>
    </pre>
    <pre><code id="comando11">tar xvf v3.3.0.tar.gz</code>
    <button class="copy-button" onclick="copiarComando('comando11')">Copiar Comando</button>
    </pre>
    <pre><code id="comando12">mv coreruleset-3.3.0/ /etc/nginx/modsec/</code>
    <button class="copy-button" onclick="copiarComando('comando12')">Copiar Comando</button>
    </pre>
    <pre><code id="comando13">mv /etc/nginx/modsec/coreruleset-3.3.0/crs-setup.conf.example /etc/nginx/modsec/coreruleset-3.3.0/crs-setup.conf</code>
    <button class="copy-button" onclick="copiarComando('comando13')">Copiar Comando</button>
    </pre>
    <pre><code id="comando14">nano /etc/nginx/modsec/main.conf</code>
    <button class="copy-button" onclick="copiarComando('comando14')">Copiar Comando</button>
    </pre>
    <pre><code id="comando15">Include /etc/nginx/modsec/coreruleset-3.3.0/crs-setup.conf</code>
    <button class="copy-button" onclick="copiarComando('comando15')">Copiar Comando</button>
    </pre>
    <pre><code id="comando16">Include /etc/nginx/modsec/coreruleset-3.3.0/rules/*.conf</code>
    <button class="copy-button" onclick="copiarComando('comando16')">Copiar Comando</button>
    </pre>
    <pre><code id="comando17">systemctl restart nginx</code>
    <button class="copy-button" onclick="copiarComando('comando17')">Copiar Comando</button>
    </pre>

     <script>
        // Função para copiar o conteúdo da caixa de código para a área de transferência
        function copiarComando(id) {
            const elemento = document.getElementById(id);
            const texto = elemento.innerText;

            const textarea = document.createElement('textarea');
            textarea.value = texto;
            document.body.appendChild(textarea);

            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            alert('Comando copiado para a área de transferência: ' + texto);
        }
    </script>
</body>
</html>
